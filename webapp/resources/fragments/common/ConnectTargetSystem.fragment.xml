<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    core:require="{ commonFormatter: 'kms/common/Formatters' }"
    >
    <Dialog
        id="connectTargetSystemDialogs"
        contentHeight="35rem"
        contentWidth="30rem"
        class="sapUiContentPadding"
        title="{i18n>connectSystem}">
        <VBox
            width="100%"
            visible="{= ${connectSystemModel>/KeyConfigList}.length > 0}"
            class="sapUiContentPadding">
            <Label text="{i18n>SYSTEM}:" class="sapUiTinyMarginBottom"></Label>
            <VBox justifyContent="SpaceBetween"
                backgroundDesign="Solid"
                class="gray-background-color rounded-box">
                <Title text="{connectSystemModel>/properties/externalName}" titleStyle="H5"
                    class="sapUiSmallMarginBegin sapUiSmallMarginTop">
                    <customData>
                        <core:CustomData
                            key="testId"
                            value="connectSystem-nameTitle"
                            writeToDom="true" />
                    </customData>
                </Title>
                <Label text="{connectSystemModel>/identifier}"
                    class="sapUiSmallMarginBegin" />
                <HBox class="sapUiSmallMarginBegin sapUiSmallMarginTop sapUiSmallMarginBottom">
                    <Label text="{i18n>region}:" />
                    <Text text="{connectSystemModel>/region}" class="sapUiTinyMarginBegin">
                        <customData>
                            <core:CustomData
                                key="testId"
                                value="connectSystem-regionText"
                                writeToDom="true" />
                        </customData>
                    </Text>
                </HBox>
            </VBox>
            <HBox justifyContent="Center" alignContent="Center"
                class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                <core:Icon
                    src="sap-icon://arrow-bottom"
                    class="icon-size">
                </core:Icon>
            </HBox>
            <VBox justifyContent="SpaceBetween"
                backgroundDesign="Solid"
                class="gray-background-color rounded-box">
                <VBox class="sapUiSmallMargin">
                    <Label text="{i18n>selectedTargetKeyConfiguration}:" />
                    <ComboBox
                        width="100%"
                        selectedKey="{connectSystemModel>/selectedKeyConfig}"
                        selectionChange="onSelectedKeyConfigChange"
                        items="{connectSystemModel>/KeyConfigList}">
                        <core:Item key="{connectSystemModel>id}" text="{connectSystemModel>name}" />
                        <customData>
                            <core:CustomData
                                key="testId"
                                value="connectSystem-selectKeyConfigComboBox"
                                writeToDom="true" />
                        </customData>
                    </ComboBox>
                </VBox>
            </VBox>
            <MessageStrip
                visible="{parts: ['connectSystemModel>/workflowStatus'], formatter: 'commonFormatter.setConnectSystemInfoMessageStripVisible'}"
                text="{parts: ['connectSystemModel>/workflowStatus'], formatter: 'commonFormatter.setConnectSystemInfoMessageStripText'}"
                showIcon="true"
                showCloseButton="false"
                class="sapUiMediumMarginBottom">
            </MessageStrip>
        </VBox>
        <IllustratedMessage
            visible="{= ${connectSystemModel>/KeyConfigList}.length === 0 }"
            enableVerticalResponsiveness="false"
            title="{i18n>connectSystemsDisabled}"
            description="{i18n>connectSystemDisabledTooltip}"
            illustrationType="sapIllus-NoColumnsSet"
            illustrationSize="Dialog" />
        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button text="{i18n>connect}" icon="sap-icon://connect"
                    type="Emphasized"
                    enabled="{= !!${connectSystemModel>/selectedKeyConfig}}"
                    visible="{connectSystemModel>/showConnectButton}"
                    press="onConnectSystemSubmitPress">
                    <customData>
                        <core:CustomData
                            key="testId"
                            value="connectSystem-submitButton"
                            writeToDom="true" />
                    </customData>
                </Button>
                 <Button text="{i18n>sendForApproval}" icon="sap-icon://paper-plane"
                    type="Emphasized"
                    enabled="{= !!${connectSystemModel>/selectedKeyConfig}}"
                    visible="{connectSystemModel>/showApprovalButton}"
                    press="onConnectSystemSendForApprovalPress">
                    <customData>
                        <core:CustomData
                            key="testId"
                            value="connectSystem-submitButton"
                            writeToDom="true" />
                    </customData>
                </Button>
                <Button text="{i18n>cancel}" type="Transparent"
                    press="onConnectSystemCancelPress">
                    <customData>
                        <core:CustomData
                            key="testId"
                            value="connectSystem-cancelButton"
                            writeToDom="true" />
                    </customData>
                </Button>
            </OverflowToolbar>
        </footer>
    </Dialog>
</core:FragmentDefinition>