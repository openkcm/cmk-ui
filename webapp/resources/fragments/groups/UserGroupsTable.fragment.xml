<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:tnt="sap.tnt"
    core:require="{ formatMessage: 'sap/base/strings/formatMessage', commonFormatter: 'kms/common/Formatters' }">
    <Table
        id="userGroupsTable"
        inset="false"
        contextualWidth="Auto"
        popinLayout="GridSmall"
        items="{oneWay>/groupsData}">
        <headerToolbar>
            <OverflowToolbar>
                <Title
                    text="{parts: ['i18n>groupsWithCount', 'oneWay>/groupsCount'], formatter: 'formatMessage'}"
                    level="H2" />
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column minScreenWidth="Tablet" demandPopin="true">
                <Text text="{i18n>name}" wrapping="false" />
            </Column>
            <Column minScreenWidth="Tablet" demandPopin="true">
                <Text text="{i18n>systemsRole}" wrapping="false" />
            </Column>
            <Column minScreenWidth="Tablet" demandPopin="true">
                <Text text="{i18n>iamId}" wrapping="false" />
            </Column>
            <Column minScreenWidth="Large" hAlign="End" vAlign="Middle"
                demandPopin="true" visible="{= ${roleBasedAccess>/userGroups/canManage} }">
                <Text text="{i18n>actions}" wrapping="false" />
            </Column>
        </columns>
        <items>
            <ColumnListItem vAlign="Middle" type="Navigation" press="onUserPress">
                <cells>
                    <VBox>
                        <Input type="Text" value="{oneWay>name}" editable="true"
                            visible="{= !!${oneWay>edit}}">
                            <customData>
                                <core:CustomData
                                    key="testId"
                                    value="userGroupsTable-nameInput"
                                    writeToDom="true" />
                            </customData>
                        </Input>
                        <Text text="{oneWay>name}" visible="{= !${oneWay>edit}}">
                            <customData>
                                <core:CustomData
                                    key="testId"
                                    value="userGroupsTable-nameText"
                                    writeToDom="true" />
                            </customData>
                        </Text>
                    </VBox>
                    <Text text="{parts: ['oneWay>role'], formatter: 'commonFormatter.setGroupRole'}" />
                    <Text text="{path:'oneWay>iamIdentifier'}" />
                    <VBox>
                        <MenuButton icon="sap-icon://action-settings" type="Transparent"
                            visible="{= !${oneWay>edit} &amp;&amp; ${roleBasedAccess>/userGroups/canManage}}">
                            <menu>
                                <Menu class="sapUiSizeCompact">
                                    <MenuItem press="onKeyTableDeletePress" text="{i18n>delete}"
                                        icon="sap-icon://delete">
                                        <customData>
                                            <core:CustomData
                                                key="testId"
                                                value="userGroupsTable-deleteButton"
                                                writeToDom="true" />
                                        </customData>
                                    </MenuItem>
                                    <!-- <MenuItem press="onIASsyncPress"
                                        text="IAS Sync"
                                        icon="sap-icon://log" /> -->
                                </Menu>
                            </menu>
                            <customData>
                                <core:CustomData
                                    key="testId"
                                    value="userGroupsTable-settingsButton"
                                    writeToDom="true" />
                            </customData>
                        </MenuButton>
                    </VBox>
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>